<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>funko</title><meta name="description" content="Documentation for funko"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">funko</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>funko</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#práctica-11---creación-de-una-aplicación-express-para-gestionar-el-registro-de-funko-pops" id="práctica-11---creación-de-una-aplicación-express-para-gestionar-el-registro-de-funko-pops" style="color: inherit; text-decoration: none;">
  <h1>Práctica 11 - Creación de una aplicación Express para gestionar el registro de Funko Pops</h1>
</a>

<a href="#indice" id="indice" style="color: inherit; text-decoration: none;">
  <h2>Indice</h2>
</a>
<ul>
<li><a href="#pr%C3%A1ctica-11---creaci%C3%B3n-de-una-aplicaci%C3%B3n-express-para-gestionar-el-registro-de-funko-pops">Práctica 11 - Creación de una aplicación Express para gestionar el registro de Funko Pops</a><ul>
<li><a href="#indice">Indice</a></li>
<li><a href="#introducci%C3%B3n">Introducción</a></li>
<li><a href="#cliente">Cliente</a></li>
<li><a href="#servidor">Servidor</a><ul>
<li><a href="#ejercicio-presencial">Ejercicio presencial</a></li>
<li><a href="#conclusiones">conclusiones</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<a href="#introducción" id="introducción" style="color: inherit; text-decoration: none;">
  <h2>Introducción</h2>
</a>
<p>Para esta practica teniamos que volver a repetir el cliente y el servidor de la base de datos de funkos, pero esta vez teniamos que hacerlo con express y con callbacks.</p>
<p>primero explicar que es express, express es un framework de node.js que nos permite crear aplicaciones web de una forma más sencilla y rápida.
por otra parte, los callbacks son funciones que se ejecutan cuando se produce un evento, en este caso cuando se produce una petición http.</p>

<a href="#cliente" id="cliente" style="color: inherit; text-decoration: none;">
  <h2>Cliente</h2>
</a>
<p>lo primero que vamos a explicar es el cliente. En este, aparte de tener los yargs ya hechos de las practicas anteriores, contaremos con los request que nos permiten hacer las peticiones http.
En este caso tenemos las siguientes funciones:</p>
<pre><code class="language-typescript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">ShowRequest</span><span class="hl-1"> = (</span><span class="hl-3">usuario</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-3">id</span><span class="hl-1">:</span><span class="hl-4">number</span><span class="hl-1">, </span><span class="hl-3">flag</span><span class="hl-1">:</span><span class="hl-4">boolean</span><span class="hl-1">, </span><span class="hl-2">callback</span><span class="hl-1">: (</span><span class="hl-3">err</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-3">data</span><span class="hl-1">: </span><span class="hl-4">request</span><span class="hl-1">.</span><span class="hl-4">Response</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-4">void</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">url</span><span class="hl-1"> = </span><span class="hl-6">`http://localhost:4099/funko?usuario=</span><span class="hl-0">${</span><span class="hl-3">usuario</span><span class="hl-0">}</span><span class="hl-6">&amp;id=</span><span class="hl-0">${</span><span class="hl-3">id</span><span class="hl-0">}</span><span class="hl-6">&amp;flag=</span><span class="hl-0">${</span><span class="hl-3">flag</span><span class="hl-0">}</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">request</span><span class="hl-1">({</span><span class="hl-3">url:</span><span class="hl-1"> </span><span class="hl-3">url</span><span class="hl-1">, </span><span class="hl-3">method:</span><span class="hl-1"> </span><span class="hl-6">&#39;GET&#39;</span><span class="hl-1">}, (</span><span class="hl-3">error</span><span class="hl-1">: </span><span class="hl-4">Error</span><span class="hl-1">, </span><span class="hl-3">response</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">error</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">callback</span><span class="hl-1">(</span><span class="hl-6">&#39;Error al enviar la solicitud GET&#39;</span><span class="hl-1">, </span><span class="hl-0">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">callback</span><span class="hl-1">(</span><span class="hl-0">undefined</span><span class="hl-1">, </span><span class="hl-3">response</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">addRequest</span><span class="hl-1"> = (</span><span class="hl-3">id</span><span class="hl-1">:</span><span class="hl-4">number</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">usuario</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">nombre</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">descripcion</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">tipo</span><span class="hl-1">:</span><span class="hl-4">Tipo</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">genero</span><span class="hl-1">:</span><span class="hl-4">Genero</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">franquicia</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">numero</span><span class="hl-1">:</span><span class="hl-4">number</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">exclusivo</span><span class="hl-1">:</span><span class="hl-4">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">caracteristicas</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">valor</span><span class="hl-1">:</span><span class="hl-4">number</span><span class="hl-1">, </span><span class="hl-2">callback</span><span class="hl-1">: (</span><span class="hl-3">err</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-3">data</span><span class="hl-1">: </span><span class="hl-4">request</span><span class="hl-1">.</span><span class="hl-4">Response</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-4">void</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">url</span><span class="hl-1"> = </span><span class="hl-6">`http://localhost:4099/funko?usuario=</span><span class="hl-0">${</span><span class="hl-3">usuario</span><span class="hl-0">}</span><span class="hl-6">&amp;id=</span><span class="hl-0">${</span><span class="hl-3">id</span><span class="hl-0">}</span><span class="hl-6">&amp;nombre=</span><span class="hl-0">${</span><span class="hl-3">nombre</span><span class="hl-0">}</span><span class="hl-6">&amp;descripcion=</span><span class="hl-0">${</span><span class="hl-3">descripcion</span><span class="hl-0">}</span><span class="hl-6">&amp;tipo=</span><span class="hl-0">${</span><span class="hl-3">tipo</span><span class="hl-0">}</span><span class="hl-6">&amp;genero=</span><span class="hl-0">${</span><span class="hl-3">genero</span><span class="hl-0">}</span><span class="hl-6">&amp;franquicia=</span><span class="hl-0">${</span><span class="hl-3">franquicia</span><span class="hl-0">}</span><span class="hl-6">&amp;numero=</span><span class="hl-0">${</span><span class="hl-3">numero</span><span class="hl-0">}</span><span class="hl-6">&amp;exclusivo=</span><span class="hl-0">${</span><span class="hl-3">exclusivo</span><span class="hl-0">}</span><span class="hl-6">&amp;caracteristicas=</span><span class="hl-0">${</span><span class="hl-3">caracteristicas</span><span class="hl-0">}</span><span class="hl-6">&amp;valor=</span><span class="hl-0">${</span><span class="hl-3">valor</span><span class="hl-0">}</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">request</span><span class="hl-1">({</span><span class="hl-3">url:</span><span class="hl-1"> </span><span class="hl-3">url</span><span class="hl-1">, </span><span class="hl-3">method:</span><span class="hl-1"> </span><span class="hl-6">&#39;POST&#39;</span><span class="hl-1">}, (</span><span class="hl-3">error</span><span class="hl-1">: </span><span class="hl-4">Error</span><span class="hl-1">, </span><span class="hl-3">response</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">error</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">callback</span><span class="hl-1">(</span><span class="hl-6">&#39;Error al enviar la solicitud POST&#39;</span><span class="hl-1">, </span><span class="hl-0">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">callback</span><span class="hl-1">(</span><span class="hl-0">undefined</span><span class="hl-1">, </span><span class="hl-3">response</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  };</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">deleteRequest</span><span class="hl-1"> = (</span><span class="hl-3">usuario</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-3">id</span><span class="hl-1">:</span><span class="hl-4">number</span><span class="hl-1">, </span><span class="hl-2">callback</span><span class="hl-1">: (</span><span class="hl-3">err</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-3">data</span><span class="hl-1">: </span><span class="hl-4">request</span><span class="hl-1">.</span><span class="hl-4">Response</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-4">void</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">url</span><span class="hl-1"> = </span><span class="hl-6">`http://localhost:4099/funko?usuario=</span><span class="hl-0">${</span><span class="hl-3">usuario</span><span class="hl-0">}</span><span class="hl-6">&amp;id=</span><span class="hl-0">${</span><span class="hl-3">id</span><span class="hl-0">}</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">request</span><span class="hl-1">({</span><span class="hl-3">url:</span><span class="hl-1"> </span><span class="hl-3">url</span><span class="hl-1">, </span><span class="hl-3">method:</span><span class="hl-1"> </span><span class="hl-6">&#39;DELETE&#39;</span><span class="hl-1">}, (</span><span class="hl-3">error</span><span class="hl-1">: </span><span class="hl-4">Error</span><span class="hl-1">, </span><span class="hl-3">response</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">error</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">callback</span><span class="hl-1">(</span><span class="hl-6">&#39;Error al enviar la solicitud DELETE&#39;</span><span class="hl-1">, </span><span class="hl-0">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">callback</span><span class="hl-1">(</span><span class="hl-0">undefined</span><span class="hl-1">, </span><span class="hl-3">response</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">updateRequest</span><span class="hl-1"> = (</span><span class="hl-3">id</span><span class="hl-1">:</span><span class="hl-4">number</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">usuario</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">nombre</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">descripcion</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">tipo</span><span class="hl-1">:</span><span class="hl-4">Tipo</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">genero</span><span class="hl-1">:</span><span class="hl-4">Genero</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">franquicia</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">numero</span><span class="hl-1">:</span><span class="hl-4">number</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">exclusivo</span><span class="hl-1">:</span><span class="hl-4">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">caracteristicas</span><span class="hl-1">:</span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">valor</span><span class="hl-1">:</span><span class="hl-4">number</span><span class="hl-1">, </span><span class="hl-2">callback</span><span class="hl-1">: (</span><span class="hl-3">err</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-3">data</span><span class="hl-1">: </span><span class="hl-4">request</span><span class="hl-1">.</span><span class="hl-4">Response</span><span class="hl-1"> | </span><span class="hl-4">undefined</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-4">void</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">url</span><span class="hl-1"> = </span><span class="hl-6">`http://localhost:4099/funko?usuario=</span><span class="hl-0">${</span><span class="hl-3">usuario</span><span class="hl-0">}</span><span class="hl-6">&amp;id=</span><span class="hl-0">${</span><span class="hl-3">id</span><span class="hl-0">}</span><span class="hl-6">&amp;nombre=</span><span class="hl-0">${</span><span class="hl-3">nombre</span><span class="hl-0">}</span><span class="hl-6">&amp;descripcion=</span><span class="hl-0">${</span><span class="hl-3">descripcion</span><span class="hl-0">}</span><span class="hl-6">&amp;tipo=</span><span class="hl-0">${</span><span class="hl-3">tipo</span><span class="hl-0">}</span><span class="hl-6">&amp;genero=</span><span class="hl-0">${</span><span class="hl-3">genero</span><span class="hl-0">}</span><span class="hl-6">&amp;franquicia=</span><span class="hl-0">${</span><span class="hl-3">franquicia</span><span class="hl-0">}</span><span class="hl-6">&amp;numero=</span><span class="hl-0">${</span><span class="hl-3">numero</span><span class="hl-0">}</span><span class="hl-6">&amp;exclusivo=</span><span class="hl-0">${</span><span class="hl-3">exclusivo</span><span class="hl-0">}</span><span class="hl-6">&amp;caracteristicas=</span><span class="hl-0">${</span><span class="hl-3">caracteristicas</span><span class="hl-0">}</span><span class="hl-6">&amp;valor=</span><span class="hl-0">${</span><span class="hl-3">valor</span><span class="hl-0">}</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">request</span><span class="hl-1">({</span><span class="hl-3">url:</span><span class="hl-1"> </span><span class="hl-3">url</span><span class="hl-1">, </span><span class="hl-3">method:</span><span class="hl-1"> </span><span class="hl-6">&#39;PATCH&#39;</span><span class="hl-1">}, (</span><span class="hl-3">error</span><span class="hl-1">: </span><span class="hl-4">Error</span><span class="hl-1">, </span><span class="hl-3">response</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">error</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">callback</span><span class="hl-1">(</span><span class="hl-6">&#39;Error al enviar la solicitud PATCH&#39;</span><span class="hl-1">, </span><span class="hl-0">undefined</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">callback</span><span class="hl-1">(</span><span class="hl-0">undefined</span><span class="hl-1">, </span><span class="hl-3">response</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">};</span>
</code></pre>
<p>como podemos ver, tenemos las funciones de show, add, delete y update, que son las que nos permiten hacer las peticiones http para obtener datos, añadir datos, borrar datos y actualizar datos respectivamente.</p>
<p>Tras esto el resto del codigo es practicamente similar al de la practica anterior. Un ejemplo de una de las funciones de show sería la siguiente:</p>
<pre><code class="language-typescript"><span class="hl-1">  .</span><span class="hl-2">command</span><span class="hl-1">(</span><span class="hl-6">&#39;list&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Add a new note&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-3">usuario:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;usuario&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">demandOption:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  }, (</span><span class="hl-3">argv</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1"> (</span><span class="hl-6">&#39;Listar&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">id</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">bandera</span><span class="hl-1"> = </span><span class="hl-0">false</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">ShowRequest</span><span class="hl-1">(</span><span class="hl-3">argv</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1">,</span><span class="hl-3">id</span><span class="hl-1">,</span><span class="hl-3">bandera</span><span class="hl-1">,(</span><span class="hl-3">err</span><span class="hl-1">, </span><span class="hl-3">data</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-2">error</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">);</span><br/><span class="hl-1">      } </span><span class="hl-7">else</span><span class="hl-1">{</span><br/><span class="hl-1">        </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-3">data</span><span class="hl-1">.</span><span class="hl-3">body</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  })</span>
</code></pre>
<p>como podemos ver, en este caso tenemos que pasarle el usuario, el id y la bandera, que en este caso es false, ya que no queremos que nos muestre solo un funko, sino todos los que tenemos en la base de datos. Una vez enviados los datos, se espera a la respuesta y dependiendo de si hay error o no, se muestra por pantalla lo que nos devuelve el servidor.</p>

<a href="#servidor" id="servidor" style="color: inherit; text-decoration: none;">
  <h2>Servidor</h2>
</a>
<p>En el servidor lo primero que hacemos es crearlo con express:</p>
<pre><code class="language-typescript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">servidor</span><span class="hl-1"> = </span><span class="hl-2">express</span><span class="hl-1">();</span>
</code></pre>
<p>Una vez creado el servidor y tras poner las funciones ya usadas en practicas anteriores para crear y eliminar la base de datos, empezamos a crear las funciones del servidor. En este caso tenemos las siguientes funciones:</p>
<pre><code class="language-typescript"><span class="hl-9">/**</span><br/><span class="hl-9"> * funcion para mostrar informacion de un funko o de todos los funkos de un usuario</span><br/><span class="hl-9"> */</span><br/><span class="hl-3">servidor</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-6">&#39;/funko&#39;</span><span class="hl-1">, (</span><span class="hl-3">req</span><span class="hl-1">, </span><span class="hl-3">res</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">flagayuda</span><span class="hl-1">= </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">flag</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">flag</span><span class="hl-1">:</span><span class="hl-4">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">flagayuda</span><span class="hl-1"> === </span><span class="hl-6">&#39;false&#39;</span><span class="hl-1">){</span><br/><span class="hl-1">    </span><span class="hl-3">flag</span><span class="hl-1"> = </span><span class="hl-2">Boolean</span><span class="hl-1">(!</span><span class="hl-3">flagayuda</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">flag</span><span class="hl-1"> = </span><span class="hl-2">Boolean</span><span class="hl-1">(</span><span class="hl-3">flagayuda</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">flag</span><span class="hl-1"> === </span><span class="hl-0">true</span><span class="hl-1">){</span><br/><span class="hl-1">    </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">datosEnvio</span><span class="hl-1">: (</span><span class="hl-4">string</span><span class="hl-1">|</span><span class="hl-4">number</span><span class="hl-1">|</span><span class="hl-4">boolean</span><span class="hl-1">)[]=[];</span><br/><span class="hl-1">    </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">ayudaId</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">idGet</span><span class="hl-1"> = </span><span class="hl-2">parseInt</span><span class="hl-1">(</span><span class="hl-3">ayudaId</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-9">//comprueba si existe el usuario</span><br/><span class="hl-1">    </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-2">existsSync</span><span class="hl-1">(</span><span class="hl-6">&#39;./datos/&#39;</span><span class="hl-1">+</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1">)){</span><br/><span class="hl-1">      </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">usuario</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-2">Usuario</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-9">//compueba si existe el funko con ese id</span><br/><span class="hl-1">      </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatos</span><span class="hl-1">()?.</span><span class="hl-2">forEach</span><span class="hl-1">((</span><span class="hl-3">usuario</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">getFunkos</span><span class="hl-1">()?.</span><span class="hl-2">forEach</span><span class="hl-1">((</span><span class="hl-3">funko</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">.</span><span class="hl-2">GetId</span><span class="hl-1">() == </span><span class="hl-3">idGet</span><span class="hl-1">){</span><br/><span class="hl-1">            </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">!= </span><span class="hl-0">undefined</span><span class="hl-1">){</span><br/><span class="hl-1">             </span><span class="hl-3">datosEnvio</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">.</span><span class="hl-2">GetId</span><span class="hl-1">());</span><br/><span class="hl-1">             </span><span class="hl-3">datosEnvio</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">());</span><br/><span class="hl-1">             </span><span class="hl-3">datosEnvio</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">.</span><span class="hl-2">GetDescripcion</span><span class="hl-1">());</span><br/><span class="hl-1">             </span><span class="hl-3">datosEnvio</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">.</span><span class="hl-2">GetTipo</span><span class="hl-1">());</span><br/><span class="hl-1">             </span><span class="hl-3">datosEnvio</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">.</span><span class="hl-2">GetGenero</span><span class="hl-1">());</span><br/><span class="hl-1">             </span><span class="hl-3">datosEnvio</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">.</span><span class="hl-2">GetFranquicia</span><span class="hl-1">());</span><br/><span class="hl-1">             </span><span class="hl-3">datosEnvio</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">.</span><span class="hl-2">GetIdFranquicia</span><span class="hl-1">());</span><br/><span class="hl-1">             </span><span class="hl-3">datosEnvio</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">.</span><span class="hl-2">GetExclusivo</span><span class="hl-1">());</span><br/><span class="hl-1">             </span><span class="hl-3">datosEnvio</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">.</span><span class="hl-2">GetCaracteristicas</span><span class="hl-1">());</span><br/><span class="hl-1">             </span><span class="hl-3">datosEnvio</span><span class="hl-1">.</span><span class="hl-2">push</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">.</span><span class="hl-2">GetValorNumerico</span><span class="hl-1">());</span><br/><span class="hl-1">              </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-3">datosEnvio</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-7">else</span><span class="hl-1">{</span><br/><span class="hl-1">              </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-6">&#39;No existe el funko con ese id&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-7">else</span><span class="hl-1">{</span><br/><span class="hl-1">      </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-6">&#39;No existe el usuario&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">else</span><span class="hl-1"> </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">flag</span><span class="hl-1"> === </span><span class="hl-0">false</span><span class="hl-1">){</span><br/><span class="hl-1">    </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-2">existsSync</span><span class="hl-1">(</span><span class="hl-6">&#39;./datos/&#39;</span><span class="hl-1">+</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1">)){</span><br/><span class="hl-1">      </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">salida</span><span class="hl-1"> = </span><span class="hl-6">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatos</span><span class="hl-1">().</span><span class="hl-2">forEach</span><span class="hl-1">(</span><span class="hl-3">usuario</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">getDuenioColeccion</span><span class="hl-1">() == </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1">){</span><br/><span class="hl-1">        </span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">getFunkos</span><span class="hl-1">().</span><span class="hl-2">forEach</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-3">salida</span><span class="hl-1">+= </span><span class="hl-3">funko</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">() + </span><span class="hl-6">&#39;</span><span class="hl-10">\n</span><span class="hl-6">&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">      </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-3">salida</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-7">else</span><span class="hl-1">{</span><br/><span class="hl-1">      </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-6">&#39;No existe el usuario&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-9">/**</span><br/><span class="hl-9"> * el servidor crea un funko y lo añade a la coleccion</span><br/><span class="hl-9"> */</span><br/><span class="hl-3">servidor</span><span class="hl-1">.</span><span class="hl-2">post</span><span class="hl-1">(</span><span class="hl-6">&#39;/funko&#39;</span><span class="hl-1">, (</span><span class="hl-3">req</span><span class="hl-1">, </span><span class="hl-3">res</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">ayudaId</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">idGet</span><span class="hl-1"> = </span><span class="hl-2">parseInt</span><span class="hl-1">(</span><span class="hl-3">ayudaId</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">ayudaIdFranquicia</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">numero</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">idFranquiciaGet</span><span class="hl-1"> = </span><span class="hl-2">parseInt</span><span class="hl-1">(</span><span class="hl-3">ayudaIdFranquicia</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">ayudaValorNumerico</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">valor</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">valorNumericoGet</span><span class="hl-1"> = </span><span class="hl-2">parseInt</span><span class="hl-1">(</span><span class="hl-3">ayudaValorNumerico</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">tipoGet</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">tipo</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">Tipo</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">generoGet</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">genero</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">Genero</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">ayudaExclusivo</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">exclusivo</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">exclusivoGet</span><span class="hl-1"> = </span><span class="hl-2">Boolean</span><span class="hl-1">(</span><span class="hl-3">ayudaExclusivo</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-9">//crea el objeto funko con los datos del comando</span><br/><span class="hl-1">  </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">usuario</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-2">Usuario</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-9">//busca si hay un funko con el mismo id</span><br/><span class="hl-1">  </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">)?.</span><span class="hl-2">getFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">) != </span><span class="hl-0">undefined</span><span class="hl-1">){</span><br/><span class="hl-1">    </span><span class="hl-9">//si existe envia un mensaje de error al cliente</span><br/><span class="hl-1">    </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-6">&#39;Ya existe un funko con ese id&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">finished</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-9">//comprueba si el valor numerico es un numero negativo</span><br/><span class="hl-1">  </span><span class="hl-7">else</span><span class="hl-1"> </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">valorNumericoGet</span><span class="hl-1"> &lt; </span><span class="hl-8">0</span><span class="hl-1">){</span><br/><span class="hl-1">    </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-6">&#39;El valor numerico no puede ser negativo&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">else</span><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">funko</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-2">Funko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">nombre</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">descripcion</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">generoGet</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">tipoGet</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">franquicia</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">idFranquiciaGet</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">exclusivoGet</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">caracteristicas</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">valorNumericoGet</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-9">//comprueba si existe el usuario y si no lo crea</span><br/><span class="hl-1">  </span><span class="hl-7">if</span><span class="hl-1">(!</span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-2">existsSync</span><span class="hl-1">(</span><span class="hl-6">&#39;./datos/&#39;</span><span class="hl-1">+</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1">)){</span><br/><span class="hl-1">    </span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-2">mkdirSync</span><span class="hl-1">(</span><span class="hl-6">&#39;./datos/&#39;</span><span class="hl-1">+</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">NuevaColeccionFunkos</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-2">ColeccionFunkos</span><span class="hl-1">([</span><span class="hl-3">funko</span><span class="hl-1">],</span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">());</span><br/><span class="hl-1">    </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">aniadirDatos</span><span class="hl-1">(</span><span class="hl-3">NuevaColeccionFunkos</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">else</span><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-9">//si el usuario ya existe añade el funko a su coleccion</span><br/><span class="hl-1">    </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">)?.</span><span class="hl-2">aniadirFunko</span><span class="hl-1">(</span><span class="hl-3">funko</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-6">&#39;Funko añadido&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-9">//guarda todos los datos en los archivos json</span><br/><span class="hl-1">  </span><span class="hl-2">guardarBaseDatos</span><span class="hl-1">();</span><br/><span class="hl-1">}</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-9">/**</span><br/><span class="hl-9"> * el servidor borra un funko de la coleccion del usuario</span><br/><span class="hl-9"> */</span><br/><span class="hl-3">servidor</span><span class="hl-1">.</span><span class="hl-2">delete</span><span class="hl-1">(</span><span class="hl-6">&#39;/funko&#39;</span><span class="hl-1">, (</span><span class="hl-3">req</span><span class="hl-1">, </span><span class="hl-3">res</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">ayudaId</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">idGet</span><span class="hl-1"> = </span><span class="hl-2">parseInt</span><span class="hl-1">(</span><span class="hl-3">ayudaId</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-2">existsSync</span><span class="hl-1">(</span><span class="hl-6">&#39;./datos/&#39;</span><span class="hl-1">+</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">)){</span><br/><span class="hl-1">    </span><span class="hl-9">//compueba si existe el funko con ese id</span><br/><span class="hl-1">    </span><span class="hl-7">if</span><span class="hl-1">(!</span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">)?.</span><span class="hl-2">getFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">)){</span><br/><span class="hl-1">      </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-6">&#39;El funko no existe&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-7">return</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-9">//si existe borra el funko de la coleccion de funkos del usuario</span><br/><span class="hl-1">    </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">)?.</span><span class="hl-2">eliminarFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-9">//borra el archivo json del funko</span><br/><span class="hl-1">    </span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-2">unlink</span><span class="hl-1">(</span><span class="hl-6">&#39;./datos/&#39;</span><span class="hl-1">+</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">+</span><span class="hl-6">&#39;/&#39;</span><span class="hl-1">+</span><span class="hl-3">idGet</span><span class="hl-1">+</span><span class="hl-6">&#39;.json&#39;</span><span class="hl-1">, (</span><span class="hl-3">err</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-3">err</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-2">error</span><span class="hl-1">(</span><span class="hl-3">err</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-6">&#39;Funko borrado&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">else</span><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-6">&#39;El usuario no existe&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-9">//guarda todos los datos en los archivos json</span><br/><span class="hl-1">  </span><span class="hl-2">guardarBaseDatos</span><span class="hl-1">();</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-9">/**</span><br/><span class="hl-9"> * el servidor modifica un funko en funcion a los parametros indicados</span><br/><span class="hl-9"> */</span><br/><span class="hl-3">servidor</span><span class="hl-1">.</span><span class="hl-2">patch</span><span class="hl-1">(</span><span class="hl-6">&#39;/funko&#39;</span><span class="hl-1">, (</span><span class="hl-3">req</span><span class="hl-1">, </span><span class="hl-3">res</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">ayudaId</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">idGet</span><span class="hl-1"> = </span><span class="hl-2">parseInt</span><span class="hl-1">(</span><span class="hl-3">ayudaId</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">ayudaIdFranquicia</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">numero</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">idFranquiciaGet</span><span class="hl-1"> = </span><span class="hl-2">parseInt</span><span class="hl-1">(</span><span class="hl-3">ayudaIdFranquicia</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">ayudaValorNumerico</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">valor</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">valorNumericoGet</span><span class="hl-1"> = </span><span class="hl-2">parseInt</span><span class="hl-1">(</span><span class="hl-3">ayudaValorNumerico</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">tipoGet</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">tipo</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">Tipo</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">generoGet</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">genero</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">Genero</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">ayudaExclusivo</span><span class="hl-1"> = </span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">exclusivo</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-5">exclusivoGet</span><span class="hl-1"> = </span><span class="hl-2">Boolean</span><span class="hl-1">(</span><span class="hl-3">ayudaExclusivo</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-9">//comprueba si existe el usuario</span><br/><span class="hl-1">  </span><span class="hl-7">if</span><span class="hl-1">(!</span><span class="hl-3">fs</span><span class="hl-1">.</span><span class="hl-2">existsSync</span><span class="hl-1">(</span><span class="hl-6">&#39;./datos/&#39;</span><span class="hl-1">+</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">)){</span><br/><span class="hl-1">    </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-3">usuario</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-2">Usuario</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">usuario</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-9">//compueba si existe el funko con ese id</span><br/><span class="hl-1">    </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">())?.</span><span class="hl-2">getFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">)){</span><br/><span class="hl-1">      </span><span class="hl-9">//modifica el funko con los datos del comando</span><br/><span class="hl-1">      </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">())?.</span><span class="hl-2">getFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">)?.</span><span class="hl-2">SetNombre</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">nombre</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">())?.</span><span class="hl-2">getFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">)?.</span><span class="hl-2">SetDescripcion</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">descripcion</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">())?.</span><span class="hl-2">getFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">)?.</span><span class="hl-2">SetTipo</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">tipo</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">Tipo</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">())?.</span><span class="hl-2">getFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">)?.</span><span class="hl-2">SetGenero</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">genero</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">Genero</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">())?.</span><span class="hl-2">getFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">)?.</span><span class="hl-2">SetFranquicia</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">franquicia</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">())?.</span><span class="hl-2">getFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">)?.</span><span class="hl-2">SetIdFranquicia</span><span class="hl-1">(</span><span class="hl-3">idFranquiciaGet</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">())?.</span><span class="hl-2">getFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">)?.</span><span class="hl-2">SetExclusivo</span><span class="hl-1">(</span><span class="hl-3">exclusivoGet</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">())?.</span><span class="hl-2">getFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">)?.</span><span class="hl-2">SetCaracteristicas</span><span class="hl-1">(</span><span class="hl-3">req</span><span class="hl-1">.</span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-3">caracteristicas</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">ColeccionDatos1</span><span class="hl-1">.</span><span class="hl-2">getDatosUsuario</span><span class="hl-1">(</span><span class="hl-3">usuario</span><span class="hl-1">.</span><span class="hl-2">GetNombre</span><span class="hl-1">())?.</span><span class="hl-2">getFunko</span><span class="hl-1">(</span><span class="hl-3">idGet</span><span class="hl-1">)?.</span><span class="hl-2">SetValorNumerico</span><span class="hl-1">(</span><span class="hl-3">valorNumericoGet</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-6">&#39;Funko editado&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-7">else</span><span class="hl-1">{</span><br/><span class="hl-1">      </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-6">&#39;El funko no existe&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">else</span><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-3">res</span><span class="hl-1">.</span><span class="hl-2">send</span><span class="hl-1">(</span><span class="hl-6">&#39;El usuario no existe&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-9">//guarda todos los datos en los archivos json</span><br/><span class="hl-1">  </span><span class="hl-2">guardarBaseDatos</span><span class="hl-1">();</span><br/><span class="hl-1">});</span>
</code></pre>
<p>Al igual que antes en el cliente y como se puede apreciar, el codigo es muy similar a como hemos hecho en practicas anteriores, cambiando los metodos para mostrar los resultados a <strong>send</strong> para enviar los mismos al cliente.</p>
<p>Aparte de esto, en el servidor hay que decirle en que puerto se va a poner a escuchar, y ya de paso, como es algo que vamos a hacer siempre al principio, en este vamos a invocar la funcion para crear la base de datos del mismo:</p>
<pre><code class="language-typescript"><span class="hl-3">servidor</span><span class="hl-1">.</span><span class="hl-2">listen</span><span class="hl-1">(</span><span class="hl-8">4099</span><span class="hl-1">, () </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Server is up on port 4099&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-9">//llama al metodo para crear la base de datos</span><br/><span class="hl-1">    </span><span class="hl-2">crearBaseDatos</span><span class="hl-1">();</span><br/><span class="hl-1">});</span>
</code></pre>
<p>Como se puede apreciar, el servidor esta escuchando en el puerto 4099 en este caso, y al iniciar el servidor, se llama al metodo para crear la base de datos.</p>

<a href="#ejercicio-presencial" id="ejercicio-presencial" style="color: inherit; text-decoration: none;">
  <h3>Ejercicio presencial</h3>
</a>
<p>Por último, como ejercicio presencial nos toco hacer algo similar a la practica pero mas reducido y donde el cliente mandara un comando de linux al servidor para que este lo ejecute y nos devuelva el resultado.</p>
<p>la principal diferencia es que usamos los child-process, mas especificamente el <strong>spawn</strong> para que ejcutara el comando que le mandamos, y el <strong>on</strong> para que nos devolviera el resultado de la ejecucion del comando.</p>

<a href="#conclusiones" id="conclusiones" style="color: inherit; text-decoration: none;">
  <h3>conclusiones</h3>
</a>
<p>Tras ver la practica anterior y esta, se puede apreciar la facilidad y la velocidad con la que se puede trabajar con las url, express y los callbacks, ademas de ver enlaces y cosas que de normal ves en la vida cotidiana y planteandote dudas de cosas que pueden llegarse a hacer con ellas.</p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">funko</a>
<ul>
<li class="tsd-kind-module"><a href="modules/Funko_ColeccionDatos.html">Funko/<wbr/>Coleccion<wbr/>Datos</a></li>
<li class="tsd-kind-module"><a href="modules/Funko_ColeccionFunkos.html">Funko/<wbr/>Coleccion<wbr/>Funkos</a></li>
<li class="tsd-kind-module"><a href="modules/Funko_Funko.html">Funko/<wbr/>Funko</a></li>
<li class="tsd-kind-module"><a href="modules/Usuario_Usuario.html">Usuario/<wbr/>Usuario</a></li>
<li class="tsd-kind-module"><a href="modules/index.html">index</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>